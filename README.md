# Desktop-Mate

üé≠ **Interactive VRM Desktop Companion** - Une application hybride Unity + Python qui donne vie √† votre avatar VRM sur votre bureau !

[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![Unity 2022.3+](https://img.shields.io/badge/unity-2022.3+-black.svg)](https://unity.com/)
[![Status](https://img.shields.io/badge/status-MVP%20Complete-success.svg)](https://github.com/Xyon15/desktop-mate)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

## üìã Description

Desktop-Mate est une application qui permet d'afficher un avatar VRM interactif sur votre bureau Windows. L'avatar peut :
- üé§ Synchroniser ses l√®vres avec votre microphone (lip-sync)
- üòä Afficher des expressions et √©motions
- üëÅÔ∏è Suivre votre visage via webcam
- üéÆ R√©agir √† des commandes et interactions

**Objectif final :** ü§ñ Connecter l'avatar √† une **IA conversationnelle (chatbot)** pour cr√©er un assistant virtuel qui peut **parler, r√©agir √©motionnellement et se d√©placer librement** sur le bureau. L'avatar deviendra un v√©ritable compagnon interactif intelligent !

**Status actuel :** ‚úÖ Phases 1-2-3 termin√©es ! L'avatar s'affiche, exprime des √©motions avec **transitions fluides**, **cligne des yeux naturellement** avec animation SmoothStep et **bouge la t√™te de mani√®re vivante** ! Interface r√©organis√©e en 3 onglets logiques. ‚ú®üëÅÔ∏èüé≠

## ‚ö° Quick Start

```powershell
# 1. Cloner le repo
git clone https://github.com/Xyon15/desktop-mate.git
cd desktop-mate

# 2. Setup Python
python -m venv venv
.\venv\Scripts\Activate.ps1
pip install -r requirements.txt

# 3. Lancer Unity (ouvrir unity/DesktopMateUnity/ et cliquer Play)

# 4. Lancer Python
python main.py
# ‚Üí Cliquer "Connect to Unity" puis "Load VRM Model"
```

üìñ **[Documentation compl√®te](docs/START_HERE.md)**

## üèóÔ∏è Architecture

Le projet utilise une **architecture hybride** pour combiner les forces de Unity et Python :

### Unity (Rendu 3D)
- Chargement et rendu des mod√®les VRM
- Gestion des animations et blendshapes
- Physique et effets visuels avanc√©s

### Python (Logique & UI)
- Interface de contr√¥le (PySide6/Qt)
- Capture audio et traitement
- Communication IPC avec Unity
- Gestion de configuration

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Python App    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Unity Engine   ‚îÇ
‚îÇ  (PySide6 GUI)  ‚îÇ  Socket ‚îÇ  (VRM Renderer)  ‚îÇ
‚îÇ  ‚Ä¢ Audio Input  ‚îÇ   IPC   ‚îÇ  ‚Ä¢ 3D Display    ‚îÇ
‚îÇ  ‚Ä¢ Controls     ‚îÇ         ‚îÇ  ‚Ä¢ Animations    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üìÅ Structure du Projet

```
desktop-mate/
‚îú‚îÄ‚îÄ main.py                 # Point d'entr√©e de l'application Python
‚îú‚îÄ‚îÄ requirements.txt        # D√©pendances Python
‚îú‚îÄ‚îÄ README.md              # Ce fichier
‚îú‚îÄ‚îÄ LICENSE                # Licence MIT
‚îÇ
‚îú‚îÄ‚îÄ src/                   # Code source Python
‚îÇ   ‚îú‚îÄ‚îÄ gui/              # Interface utilisateur Qt
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.py        # Application principale avec MainWindow
‚îÇ   ‚îú‚îÄ‚îÄ ipc/              # Communication Unity ‚Üî Python
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ unity_bridge.py  # Client socket TCP
‚îÇ   ‚îú‚îÄ‚îÄ audio/            # Capture et traitement audio (√† venir)
‚îÇ   ‚îú‚îÄ‚îÄ avatar/           # Gestion avatar et VRM (√† venir)
‚îÇ   ‚îî‚îÄ‚îÄ utils/            # Utilitaires
‚îÇ       ‚îú‚îÄ‚îÄ config.py     # Gestion configuration JSON
‚îÇ       ‚îî‚îÄ‚îÄ logger.py     # Syst√®me de logs
‚îÇ
‚îú‚îÄ‚îÄ unity/                 # Projet Unity
‚îÇ   ‚îú‚îÄ‚îÄ PythonBridge.cs   # Template script IPC
‚îÇ   ‚îî‚îÄ‚îÄ DesktopMateUnity/ # Projet Unity 2022.3 LTS (URP)
‚îÇ       ‚îî‚îÄ‚îÄ Assets/
‚îÇ           ‚îú‚îÄ‚îÄ Scripts/
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ IPC/PythonBridge.cs  # Serveur socket
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ VRMLoader.cs         # Chargeur VRM
‚îÇ           ‚îú‚îÄ‚îÄ Models/
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ Mura Mura - Model.vrm
‚îÇ           ‚îú‚îÄ‚îÄ VRM/              # Package UniVRM
‚îÇ           ‚îú‚îÄ‚îÄ UniGLTF/          # D√©pendance UniVRM
‚îÇ           ‚îî‚îÄ‚îÄ VRMShaders/       # Shaders VRM
‚îÇ
‚îú‚îÄ‚îÄ assets/               # Assets partag√©s
‚îÇ   ‚îî‚îÄ‚îÄ Mura Mura - Model.vrm
‚îÇ
‚îú‚îÄ‚îÄ tests/                # Tests unitaires (8 tests)
‚îú‚îÄ‚îÄ docs/                 # Documentation d√©taill√©e
‚îÇ   ‚îú‚îÄ‚îÄ START_HERE.md    # üëà Commence ici !
‚îÇ   ‚îú‚îÄ‚îÄ INDEX.md         # Navigation rapide
‚îÇ   ‚îú‚îÄ‚îÄ README.md        # Vue d'ensemble
‚îÇ   ‚îú‚îÄ‚îÄ docs/sessions/session_0_git_configuration/ # ‚öôÔ∏è Configuration Git Unity
‚îÇ   ‚îú‚îÄ‚îÄ docs/sessions/session_1_setup/ # Setup Python + GUI
‚îÇ   ‚îú‚îÄ‚îÄ docs/sessions/session_2_unity_installation/
‚îÇ   ‚îú‚îÄ‚îÄ docs/sessions/session_3_univrm_installation/
‚îÇ   ‚îú‚îÄ‚îÄ docs/sessions/session_4_python_unity_connection/
‚îÇ   ‚îî‚îÄ‚îÄ docs/sessions/session_5_vrm_loading/  # ‚úÖ Derni√®re session compl√®te
‚îÇ
‚îî‚îÄ‚îÄ .github/              # CI/CD et workflows
    ‚îú‚îÄ‚îÄ workflows/
    ‚îî‚îÄ‚îÄ instructions/
        ‚îî‚îÄ‚îÄ copilot-instructions.instructions.md  # Instructions IA (inclut syst√®me anti-oubli doc)
```

**üìã Syst√®me de Documentation Anti-Oubli :**
- `docs/DOCUMENTATION_CHECKLIST.md` - Checklist syst√©matique pour l'IA
- `docs/AI_DOCUMENTATION_PROMPT.md` - Prompt syst√®me pour maintenir la doc √† jour
- `docs/.github/PULL_REQUEST_TEMPLATE.md` - Template PR avec v√©rifications doc obligatoires
- `.github/instructions/copilot-instructions.instructions.md` - Instructions Copilot (applyTo: `**`)

**Syst√®me 3 niveaux garantissant la synchronisation documentation ‚Üî code.**

## üöÄ Installation

### Pr√©requis

- **Python 3.10+** ‚úÖ (Install√© : 3.10.9)
- **Unity 2022.3 LTS** ou plus r√©cent
- **Windows 10/11** (support Linux pr√©vu plus tard)

### √âtape 1 : Cloner le repository

```powershell
git clone https://github.com/Xyon15/desktop-mate.git
cd desktop-mate
```

### √âtape 2 : Cr√©er l'environnement virtuel Python

```powershell
# Cr√©er le venv
python -m venv venv

# Activer le venv
.\venv\Scripts\Activate.ps1

# Installer les d√©pendances
pip install -r requirements.txt
```

### √âtape 3 : Configurer Unity

1. Ouvrir **Unity Hub**
2. Installer **Unity 2022.3 LTS**
3. Ouvrir le projet existant dans `unity/DesktopMateUnity/`
4. **UniVRM est d√©j√† install√©** ‚úÖ
5. **PythonBridge.cs est d√©j√† configur√©** ‚úÖ
6. **VRMLoader.cs est d√©j√† cr√©√©** ‚úÖ

> üí° **Le projet Unity est d√©j√† pr√™t !** Pas besoin de configuration suppl√©mentaire.

### √âtape 4 : Lancer l'application

**Terminal 1 - Unity :**
1. Ouvrir le projet Unity dans `unity/DesktopMateUnity/`
2. Cliquer sur **Play** ‚ñ∂Ô∏è
3. V√©rifier que la console affiche : `[PythonBridge] Serveur d√©marr√© avec succ√®s`

**Terminal 2 - Python :**
```powershell
# Activer le venv
.\venv\Scripts\Activate.ps1

# Lancer l'application Python
python main.py
```

**Dans l'interface Python :**
1. Cliquer sur **"Connect to Unity"**
2. Attendre le message de succ√®s
3. Cliquer sur **"Load VRM Model"**
4. S√©lectionner `assets/Mura Mura - Model.vrm`
5. **Ton avatar appara√Æt dans Unity !** üé≠‚ú®

## üéØ Roadmap

### Phase 1 : MVP ‚úÖ **TERMIN√âE !**
- [x] Structure du projet Python
- [x] Interface Qt de base
- [x] Communication IPC Unity ‚Üî Python (socket TCP)
- [x] Installation Unity 2022.3 LTS
- [x] Installation UniVRM
- [x] Script PythonBridge.cs (serveur socket Unity)
- [x] Chargement d'un mod√®le VRM dans Unity
- [x] **Affichage de l'avatar 3D fonctionnel !** üé≠

### Phase 2 : Expressions & Animations üòä ‚úÖ **TERMIN√âE !**
- [x] **Session 6** : Expressions faciales (blendshapes) ‚úÖ
  - VRMBlendshapeController.cs v1.6 avec thread-safety
  - Interface GUI avec sliders (joy, angry, sorrow, surprised, fun)
  - Contr√¥le pr√©cis 0-100% pour chaque expression
  - Bouton "Reset All Expressions"
  - Documentation compl√®te
- [x] **Session 7** : Animations fluides ‚úÖ
  - VRMBlendshapeController.cs v2.0 avec Lerp interpolation
  - Transitions smooth entre expressions
  - Slider de vitesse ajustable (1.0-10.0)
  - Interface fran√ßaise compl√®te avec ic√¥ne
  - Syst√®me de mod√®le VRM par d√©faut
  - Chargement/d√©chargement dynamique
  - Documentation compl√®te (900+ lignes de guides techniques)
- [x] **Session 8** : Clignement automatique ‚úÖ
  - VRMAutoBlinkController.cs avec coroutines Unity
  - Animation SmoothStep (courbes de Hermite)
  - Timing naturel (2-5s entre clignements, 160ms par cycle)
  - Checkbox "Auto Blink" dans l'interface
  - Sauvegarde configuration
  - Documentation technique massive (TECHNICAL_GUIDE.md 900+ lignes)
  - Guide r√©solution probl√®mes (TROUBLESHOOTING.md avec 5 bugs r√©solus)
- [x] **Session 9** : Mouvements de T√™te + R√©organisation Interface ‚úÖ **TERMIN√âE !**
  - VRMHeadMovementController.cs avec Coroutines + SmoothStep
  - Mouvements naturels al√©atoires (yaw/pitch)
  - Contr√¥le fr√©quence (3-10s) et amplitude (2-10¬∞)
  - Interface r√©organis√©e en 3 onglets (Expressions, Animations, Options)
  - 3 boutons reset contextuels
  - R√©solution conflit VRMAutoBlinkController
  - Gestion d√©connexion Unity (reset √©tat VRM)
  - Documentation compl√®te (4 guides techniques + scripts)

### Phase 3 : Audio & Lip-Sync üé§
- [ ] **Session 10** : Capture audio et lip-sync
  - Capture audio microphone
  - D√©tection d'amplitude vocale
  - Lip-sync basique avec phon√®mes (A, I, U, E, O)
  - VU-meter dans l'UI
  - TTS (Text-to-Speech)

### Phase 4 : Int√©gration IA Conversationnelle ü§ñ (Objectif Final)
- [ ] **Session 10** : Connexion chatbot IA
  - Int√©gration LLM (GPT, Claude, LLaMA local, etc.)
  - Reconnaissance vocale (speech-to-text)
  - Synth√®se vocale IA (text-to-speech)
  - Synchronisation lip-sync avec voix IA
- [ ] **Session 11** : √âmotions intelligentes
  - Analyse sentiment des r√©ponses IA
  - Mapping √©motions ‚Üí expressions faciales
  - R√©actions contextuelles dynamiques
- [ ] **Session 12** : Mouvement libre sur bureau
  - Fen√™tre Unity sans bordures (transparent)
  - D√©placement autonome intelligent
  - Animations marche/vol
  - Interactions avec fen√™tres
  - Comportements autonomes (l'avatar d√©cide o√π aller)

### Phase 5 : Tracking & Avanc√© üëÅÔ∏è
- [ ] Face tracking via webcam (MediaPipe)
- [ ] Eye tracking basique
- [ ] Suivi du regard utilisateur
- [ ] Syst√®me de plugins

### Phase 6 : Polish & Release üöÄ
- [ ] Packaging .exe
- [ ] Installeur Windows
- [ ] Documentation compl√®te
- [ ] Tutoriels vid√©o
- [ ] Support multi-plateformes (Linux, macOS)

## üõ†Ô∏è Technologies Utilis√©es

### Python Stack
- **PySide6** : Interface graphique Qt
- **sounddevice** : Capture audio
- **numpy** : Traitement num√©rique
- **opencv-python** : Traitement d'image et webcam (optionnel)
- **pytest** : Tests unitaires

### Unity Stack
- **Unity 2022.3 LTS** : Moteur de rendu
- **UniVRM** : Support mod√®les VRM
- **URP** : Universal Render Pipeline

### Communication
- **Sockets TCP** : IPC Python ‚Üî Unity (port 5555)
- **Format JSON** : Messages structur√©s
- **Threading** : Queue + Update() pour thread-safety Unity
- *(Futur : OSC ou gRPC pour plus de fonctionnalit√©s)*

## üé≠ Fonctionnalit√©s Actuelles

### ‚úÖ Op√©rationnel
- **Interface Python Qt** : Fen√™tre de contr√¥le avec onglets, 100% en fran√ßais, ic√¥ne personnalis√©e
- **Connexion Unity** : Communication bidirectionnelle stable avec thread-safety
- **Chargement VRM** : Import, affichage et d√©chargement dynamique de mod√®les VRM
- **Mod√®le par d√©faut** : Syst√®me de mod√®le VRM par d√©faut (pas besoin de naviguer √† chaque fois) ‚ú® **SESSION 7**
- **Avatar 3D** : Mod√®le "Mura Mura" affich√© dans Unity avec rendu optimis√©
- **Expressions faciales** : Contr√¥le blendshapes VRM (joy, angry, sorrow, surprised, fun)
- **Transitions smooth** : Interpolation Lerp pour animations fluides ‚ú® **SESSION 7**
- **Vitesse ajustable** : Slider 1.0-10.0 pour contr√¥ler la rapidit√© des transitions ‚ú® **SESSION 7**
- **Clignement automatique** : Yeux qui clignent naturellement (2-5s) avec animation SmoothStep (160ms) ‚ú® **SESSION 8**
- **Checkbox Auto Blink** : Activation/d√©sactivation du clignement dans l'interface ‚ú® **SESSION 8**
- **Interface sliders** : Contr√¥le pr√©cis 0-100% pour chaque expression
- **Logs d√©taill√©s** : Console + fichiers pour debugging
- **Tests unitaires** : 8 tests Python qui passent (100%)

### üöß En d√©veloppement
- Lip-sync audio (analyse FFT + phon√®mes)
- Mouvements de t√™te subtils (head bobbing)
- Eye tracking (suivi curseur)

## üîß Architecture Technique

### Communication IPC

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      Python (Client)        ‚îÇ
‚îÇ                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   MainWindow (Qt)     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Connect button     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Load VRM button    ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ              ‚îÇ              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   UnityBridge         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - send_command()     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Socket client      ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
          JSON/TCP
       127.0.0.1:5555
               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     Unity (Serveur)         ‚îÇ
‚îÇ                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   PythonBridge.cs     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - TcpListener        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - HandleMessage()    ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ              ‚îÇ              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   VRMLoader.cs        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - LoadVRMModel()     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Queue<Action>      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Update() thread    ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ              ‚îÇ              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   Scene Unity         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   üé≠ Avatar VRM       ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Thread Safety

Unity n√©cessite l'ex√©cution sur le **main thread** pour les op√©rations GameObject. VRMLoader utilise un pattern **Queue + Update()** :

```csharp
// Appel√© depuis le thread r√©seau
public void LoadVRMFromPath(string path) {
    lock (mainThreadActions) {
        mainThreadActions.Enqueue(() => LoadVRMModel());
    }
}

// Ex√©cut√© sur le main thread Unity
void Update() {
    lock (mainThreadActions) {
        while (mainThreadActions.Count > 0) {
            mainThreadActions.Dequeue()?.Invoke();
        }
    }
}
```

## üìñ Documentation

Documentation compl√®te et organis√©e par sessions de d√©veloppement :

- üìÑ **[START_HERE.md](docs/START_HERE.md)** - Point d'entr√©e de la documentation
- üìë **[INDEX.md](docs/INDEX.md)** - Navigation rapide et recherche
- üìö **[docs/README.md](docs/README.md)** - Vue d'ensemble compl√®te

### Sessions document√©es

0. **[Session 0 - Configuration Git Unity](docs/sessions/session_0_git_configuration/)** ‚öôÔ∏è
   - Configuration `.gitignore` pour Unity
   - Exclusion des fichiers g√©n√©r√©s (Library/, Temp/)
   - Bonnes pratiques Git pour projets Unity

1. **[Session 1 - Setup Python + GUI](docs/sessions/session_1_setup/)** ‚úÖ
   - Configuration environnement Python
   - Interface Qt avec PySide6
   - Syst√®me de configuration et logs

2. **[Session 2 - Installation Unity](docs/sessions/session_2_unity_installation/)** ‚úÖ
   - Installation Unity 2022.3 LTS
   - Cr√©ation projet URP
   - Configuration de base

3. **[Session 3 - Installation UniVRM](docs/sessions/session_3_univrm_installation/)** ‚úÖ
   - Installation du package UniVRM
   - Support des mod√®les VRM
   - Configuration des shaders

4. **[Session 4 - Connexion Python ‚Üî Unity](docs/sessions/session_4_python_unity_connection/)** ‚úÖ
   - Communication IPC via socket TCP
   - PythonBridge.cs (serveur Unity)
   - unity_bridge.py (client Python)
   - R√©solution des probl√®mes de connexion

5. **[Session 5 - Chargement VRM](docs/sessions/session_5_vrm_loading/)** ‚úÖ
   - VRMLoader.cs avec thread-safety
   - Chargement dynamique des mod√®les VRM
   - Affichage de l'avatar 3D
   - **Application fonctionnelle !** üéâ

6. **[Session 6 - Expressions Faciales](docs/sessions/session_6_expressions/)** ‚úÖ
   - VRMBlendshapeController.cs v1.6 pour expressions
   - Interface GUI avec sliders
   - Contr√¥le √©motions en temps r√©el
   - **L'avatar exprime des √©motions !** üòäüò†üò¢üò≤üòÑ

7. **[Session 7 - Animations Fluides](docs/sessions/session_7_animations/)** ‚úÖ
   - VRMBlendshapeController.cs v2.0 avec Lerp interpolation
   - Transitions smooth entre expressions
   - Slider de vitesse (1.0-10.0)
   - Interface fran√ßaise + ic√¥ne
   - Syst√®me mod√®le VRM par d√©faut
   - Thread-safety complet (Queue<Action> pattern)
   - **L'avatar anime ses expressions de fa√ßon fluide !** ‚ú®üé≠

8. **[Session 8 - Clignement Automatique](docs/sessions/session_8_auto_blink/)** ‚úÖ
   - VRMAutoBlinkController.cs avec coroutines Unity
   - Animation SmoothStep (courbes de Hermite) pour r√©alisme
   - Timing param√©trable (2-5s entre clignements, 160ms par cycle)
   - Checkbox "Auto Blink" dans l'interface Python
   - Sauvegarde de configuration
   - Documentation technique compl√®te (TECHNICAL_GUIDE.md 900+ lignes)
   - R√©solution de 5 probl√®mes majeurs document√©s (TROUBLESHOOTING.md)
   - **L'avatar cligne naturellement des yeux !** üëÅÔ∏è‚ú®

9. **[Session 9 - Mouvements de T√™te + R√©organisation Interface](docs/sessions/session_9_head_movements/)** ‚úÖ
   - VRMHeadMovementController.cs avec Coroutines + SmoothStep
   - Mouvements naturels al√©atoires (yaw/pitch)
   - Contr√¥le fr√©quence (3-10s) et amplitude (2-10¬∞)
   - Interface r√©organis√©e en 3 onglets (Expressions, Animations, Options)
   - 3 boutons reset contextuels pour chaque onglet
   - R√©solution conflit VRMAutoBlinkController
   - Gestion propre de la d√©connexion Unity (reset √©tat VRM)
   - Documentation compl√®te (4 guides techniques + scripts archiv√©s)
   - **L'avatar bouge naturellement la t√™te + interface moderne !** üé≠‚ú®

10. **[Session 10 - IA Conversationnelle (Kira)](docs/sessions/session_10_ai_chat/)** ‚úÖ **EN COURS - Chat 6 (Phases 1-2)**
   - **Phase 1** : Architecture de Base (30 min) ‚úÖ
     - Dossiers : src/ai/, src/discord_bot/, src/auth/, models/
     - Mod√®le LLM copi√© (Zephyr-7B, 6.8 GB)
     - Configuration : .env, requirements.txt, .gitignore
   - **Phase 2** : Base de Donn√©es & M√©moire (1h) ‚úÖ
     - src/ai/memory.py (430 lignes)
     - SQLite chat_history avec 4 indexes
     - Tests : 11/11 pass√©s
     - Singleton pattern + Context manager thread-safe
   - **Prochaine (Chat 7)** : Phases 3-5 (Config + LLM + Chat Engine)
   - **L'avatar aura bient√¥t une IA conversationnelle intelligente !** ü§ñ‚ú®

### Guides sp√©cifiques

- [Configuration Git Unity](docs/sessions/session_0_git_configuration/GIT_UNITY_FIX.md)
- [Architecture technique](docs/sessions/session_1_setup/architecture.md)
- [Debug connexion Unity](docs/sessions/session_4_python_unity_connection/DEBUG_CONNECTION.md)
- [Fix script Unity](docs/sessions/session_4_python_unity_connection/FIX_SCRIPT_NOT_RUNNING.md)
- [R√©capitulatif Session 5](docs/sessions/session_5_vrm_loading/SESSION_VRM_LOADING_SUCCESS.md)
- [Guide expressions Session 6](docs/sessions/session_6_expressions/BLENDSHAPES_GUIDE.md)
- [Guide transitions Session 7](docs/sessions/session_7_animations/TRANSITIONS_GUIDE.md) ‚ú® **900+ lignes !**
- [Guide technique Session 8](docs/sessions/session_8_auto_blink/TECHNICAL_GUIDE.md) ‚ú® **Architecture SmoothStep d√©taill√©e !**
- [R√©solution probl√®mes Session 8](docs/sessions/session_8_auto_blink/TROUBLESHOOTING.md) ‚ú® **5 probl√®mes r√©solus !**
- [R√©organisation interface Session 9](docs/sessions/session_9_head_movements/INTERFACE_REORGANIZATION.md) ‚ú® **Nouvelle architecture 3 onglets !**
- [Guide mouvements t√™te Session 9](docs/sessions/session_9_head_movements/HEAD_MOVEMENT_GUIDE.md) ‚ú® **Animations naturelles !**
- [R√©solution probl√®mes Session 9](docs/sessions/session_9_head_movements/DEBUG_ISSUES.md) ‚ú® **3 bugs critiques r√©solus !**
- [Plan Session 10](docs/sessions/session_10_ai_chat/PLAN_SESSION_10.md) ‚ú® **14 phases IA conversationnelle d√©taill√©es !**
- [Contexte Chat 7](docs/chat_transitions/chat_6_session_10_phases_1_2/CONTEXT_FOR_NEXT_CHAT.md) ‚ú® **Instructions compl√®tes Phase 3-5 !**

## ü§ù Contribution

Les contributions sont les bienvenues ! Voici comment participer :

1. Fork le projet
2. Cr√©er une branche (`git checkout -b feature/AmazingFeature`)
3. Commit vos changements (`git commit -m 'feat: add some AmazingFeature'`)
4. Push vers la branche (`git push origin feature/AmazingFeature`)
5. Ouvrir une Pull Request

### Conventions de Commit

Nous utilisons [Conventional Commits](https://www.conventionalcommits.org/) :

- `feat:` Nouvelle fonctionnalit√©
- `fix:` Correction de bug
- `docs:` Documentation
- `style:` Formatage, typos
- `refactor:` Refactoring
- `test:` Ajout de tests
- `chore:` Maintenance

## üíæ Screenshots

### Interface Python
Interface de contr√¥le avec connexion Unity et bouton de chargement VRM.

### Console Unity
```
[PythonBridge] Serveur d√©marr√© avec succ√®s sur 127.0.0.1:5555
[PythonBridge] üîó Client Python connect√© !
[PythonBridge] üì® Re√ßu : {"command": "load_model", "data": {"path": "..."}}
[VRMLoader] üìã Demande de chargement re√ßue
[VRMLoader] üé≠ Ex√©cution du chargement sur le thread principal
[VRMLoader] ‚úÖ Mod√®le charg√© avec succ√®s : Mura Mura - Model(Clone)
[VRMLoader] üìç Position : (0.0, 0.0, 0.0)
```

### Avatar dans Unity
Avatar VRM "Mura Mura" affich√© dans la fen√™tre Game de Unity üé≠

## üéì Le√ßons Apprises

### Threading Unity
Unity n√©cessite que toutes les op√©rations GameObject soient sur le main thread. Solution : Pattern Queue + Update().

### API UniVRM
L'API UniVRM varie selon les versions. Pour le MVP, approche simplifi√©e avec prefab pr√©-import√©.

### IPC Robuste
Socket TCP + JSON fonctionne bien pour la communication bidirectionnelle Python ‚Üî Unity.

### Documentation
Organisation par sessions chronologiques facilite la compr√©hension et la maintenance du projet.

## üéØ Vision du Projet

Ce projet a pour **objectif final** de cr√©er un **assistant virtuel IA complet** :
- ü§ñ **Conversation intelligente** : L'avatar pourra discuter naturellement gr√¢ce √† un LLM (chatbot IA)
- üòä **√âmotions r√©actives** : Analyse du sentiment et expressions faciales adapt√©es
- üö∂ **Mobilit√© libre** : D√©placement autonome sur le bureau, interactions avec l'environnement
- üé§ **Voix naturelle** : Reconnaissance vocale + synth√®se vocale synchronis√©e
- üß† **Comportements intelligents** : D√©cisions autonomes bas√©es sur le contexte

**L'avatar deviendra un v√©ritable compagnon num√©rique interactif et intelligent !**

## üë§ Auteur

**Xyon15**
- GitHub: [@Xyon15](https://github.com/Xyon15)

## üôè Remerciements

- [UniVRM](https://github.com/vrm-c/UniVRM) pour le support VRM
- [AcidicDoll](https://acidicdollz.booth.pm/) pour le mod√®le VRM "Mura Mura"
- La communaut√© VRM pour les ressources et tutoriels

## üìû Support

Si vous rencontrez des probl√®mes ou avez des questions :
- üìñ Consultez la [documentation compl√®te](docs/START_HERE.md)
- üêõ Ouvrez une [issue](https://github.com/Xyon15/desktop-mate/issues)
- üí¨ Regardez les fichiers DEBUG_ et FIX_ dans docs/

## üìù Changelog

### Version 0.6.0-alpha (22 octobre 2025) ‚ú® **NOUVEAU - SESSION 10 (Phases 1-2)**
- ‚úÖ **Session 10 - IA Conversationnelle (Chat 6 - Phases 1-2) d√©marr√©e !**
- ‚úÖ **Phase 1 : Architecture de Base (30 min)**
  - Cr√©ation dossiers : src/ai/, src/discord_bot/, src/auth/, models/
  - Fichiers __init__.py pour tous les modules
  - Mod√®le LLM copi√© : models/zephyr-7b-beta.Q5_K_M.gguf (6.8 GB, Mistral 7B)
  - Configuration : .env, .env.example, .gitignore √©tendu
  - requirements.txt avec 8 nouvelles d√©pendances (llama-cpp-python, discord.py, pyotp, etc.)
  - Documentation : PLAN_SESSION_10.md (14 phases d√©taill√©es), README.md Session 10
- ‚úÖ **Phase 2 : Base de Donn√©es & M√©moire (1h)**
  - src/ai/memory.py (430 lignes) - Syst√®me conversationnel complet
  - Classe ConversationMemory avec 10 m√©thodes CRUD
  - Base SQLite : data/chat_history.db (7 colonnes, 4 indexes optimis√©s)
  - Singleton pattern avec get_memory()
  - Context manager thread-safe
  - Support multi-source (desktop + discord)
  - Support √©motions pour chaque interaction
  - tests/test_memory.py - 11 tests unitaires
  - ‚úÖ **Tous les tests passent (11/11 en 0.71s) !**
- ‚úÖ **Documentation compl√®te Chat 6**
  - Transition Chat 6 ‚Üí Chat 7 compl√®te (5 fichiers)
  - CONTEXT_FOR_NEXT_CHAT.md avec instructions d√©taill√©es Phase 3-5
  - CURRENT_STATE.md avec √©tat technique complet
  - prompt_transition.txt pr√™t √† copier
  - docs/INDEX.md, README.md mis √† jour
- ‚úÖ **D√©pendances install√©es** : llama-cpp-python, pynvml, discord.py, pyotp, python-dotenv, qrcode, pillow, psutil
- ü§ñ **Bases solides pour IA conversationnelle ! Prochaine √©tape : Config + LLM + Chat Engine !** ‚ú®

### Version 0.5.0-alpha (22 octobre 2025) ‚ú® **SESSION 9**
- ‚úÖ **Session 9 - Mouvements de t√™te + R√©organisation interface termin√©e !**
- ‚úÖ VRMHeadMovementController.cs avec syst√®me de Coroutines Unity
- ‚úÖ Animation SmoothStep pour mouvements naturels (yaw/pitch)
- ‚úÖ Mouvements al√©atoires : yaw (-5¬∞ √† +5¬∞), pitch (-2.5¬∞ √† +2.5¬∞)
- ‚úÖ Contr√¥le fr√©quence (3-10s) et amplitude (2-10¬∞) dans l'interface
- ‚úÖ **Interface r√©organis√©e en 3 onglets** : Expressions, Animations, Options
- ‚úÖ **3 boutons reset contextuels** (un par onglet avec valeurs par d√©faut)
- ‚úÖ Checkbox "Auto Head Movement" dans l'onglet Animations
- ‚úÖ 2 sliders pour param√©trer fr√©quence et amplitude
- ‚úÖ Commande IPC `set_auto_head_movement` (enabled, min_interval, max_interval, max_angle)
- ‚úÖ **3 bugs critiques r√©solus** :
  - Conflit VRMAutoBlinkController (double clignement)
  - √âtat bouton VRM apr√®s d√©connexion Unity
  - Code dupliqu√© lors du refactoring (~137 lignes nettoy√©es)
- ‚úÖ Documentation compl√®te (4 guides techniques + scripts archiv√©s)
- ‚úÖ Transition Chat 6 pr√©par√©e avec CONTEXT_FOR_NEXT_CHAT
- üé≠ **L'avatar bouge maintenant naturellement la t√™te + interface moderne et organis√©e !** ‚ú®

### Version 0.4.0-alpha (21 octobre 2025) ‚ú® **SESSION 8**
- ‚úÖ **Session 8 - Clignement automatique termin√©e !**
- ‚úÖ VRMAutoBlinkController.cs avec syst√®me de coroutines Unity
- ‚úÖ Animation SmoothStep (courbes de Hermite cubiques) pour r√©alisme maximal
- ‚úÖ Timing naturel param√©trable (2-5s entre clignements, 160ms par cycle)
- ‚úÖ Checkbox "Auto Blink" dans l'onglet Options de l'interface Python
- ‚úÖ Sauvegarde automatique de configuration (config.json)
- ‚úÖ Commande IPC `set_auto_blink` (true/false)
- ‚úÖ **5 probl√®mes majeurs r√©solus** :
  - Blendshapes non appliqu√©s (mapping Blink)
  - Animation trop lente (bypass Lerp)
  - Animation robotique (SmoothStep vs Lerp)
  - Configuration non sauvegard√©e
  - Unity ne re√ßoit pas commandes (d√©lai 2.5s)
- ‚úÖ Documentation technique massive (TECHNICAL_GUIDE.md 900+ lignes)
- ‚úÖ Guide r√©solution probl√®mes (TROUBLESHOOTING.md complet)
- ‚úÖ Transition Chat 4 document√©e avec CONTEXT_FOR_NEXT_CHAT
- üëÅÔ∏è **L'avatar cligne maintenant naturellement des yeux !** ‚ú®

### Version 0.3.0-alpha (20 octobre 2025) ‚ú® **SESSION 7**
- ‚úÖ **Session 7 - Animations fluides termin√©e !**
- ‚úÖ VRMBlendshapeController.cs v2.0 avec Lerp interpolation
- ‚úÖ Transitions smooth entre expressions (dictionnaires currentValues/targetValues)
- ‚úÖ Slider de vitesse ajustable (1.0-10.0, d√©faut 3.0)
- ‚úÖ Interface 100% en fran√ßais
- ‚úÖ Ic√¥ne personnalis√©e (avec fix AppUserModelID Windows)
- ‚úÖ Syst√®me de mod√®le VRM par d√©faut (menu-based)
- ‚úÖ Chargement/d√©chargement dynamique (toggle)
- ‚úÖ Thread-safety complet (Queue<Action> pattern)
- ‚úÖ 7 bugs r√©solus (calibration slider, thread-safety, etc.)
- ‚úÖ Documentation massive (README, TRANSITIONS_GUIDE 900+ lignes, SESSION_SUCCESS)
- ‚úÖ Transition Chat 3 ‚Üí Chat 4 document√©e
- üé≠ **L'avatar anime maintenant ses expressions de fa√ßon fluide !** ‚ú®

### Version 0.2.0-alpha (19 octobre 2025)
- ‚úÖ **Session 6 - Expressions faciales termin√©e !**
- ‚úÖ VRMBlendshapeController.cs v1.6 avec contr√¥le expressions VRM
- ‚úÖ Interface GUI avec onglet "Expressions"
- ‚úÖ 5 sliders pour √©motions (joy, angry, sorrow, surprised, fun)
- ‚úÖ Contr√¥le pr√©cis 0-100% pour chaque expression
- ‚úÖ Bouton "Reset All Expressions"
- ‚úÖ Commandes IPC : set_expression, reset_expressions
- ‚úÖ Documentation Session 6 compl√®te
- üé≠ **L'avatar peut maintenant exprimer des √©motions !** üòäüò†üò¢üò≤üòÑ

### Version 0.1.0-alpha (18 octobre 2025)
- ‚úÖ **MVP termin√© !**
- ‚úÖ Interface Python Qt fonctionnelle
- ‚úÖ Communication IPC Python ‚Üî Unity stable
- ‚úÖ Chargement et affichage de mod√®les VRM
- ‚úÖ Documentation compl√®te par sessions (0-5)
- ‚úÖ Configuration Git optimis√©e pour Unity
- ‚úÖ 8 tests unitaires Python
- üé≠ **Premier avatar affich√© avec succ√®s !**

### Session 0 - Configuration Git (18 octobre 2025)
- ‚öôÔ∏è Configuration `.gitignore` pour Unity
- üì¶ Exclusion Library/, Temp/, PackageCache/
- üìö Documentation bonnes pratiques Git + Unity

---

**üéä Status actuel : [Phase 4] COMPL√àTE ! L'avatar s'affiche, exprime 5 √©motions avec transitions fluides, cligne naturellement des yeux, bouge la t√™te de mani√®re vivante ET poss√®de maintenant un syst√®me de m√©moire conversationnelle SQLite complet ! Interface moderne en 3 onglets ! Architecture IA pr√™te pour LLM ! ‚ú®üëÅÔ∏èÔøΩü§ñÔøΩüéä**

**üöÄ Prochaine √©tape (Chat 7 - Phase 3) : Configuration IA + Model Manager + Chat Engine (donner vie √† l'IA de Kira) ! üß†üí¨ü§ñ**

‚≠ê **N'oubliez pas de mettre une √©toile si ce projet vous pla√Æt !** ‚≠ê